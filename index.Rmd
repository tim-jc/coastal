---
title: "ph√Øets::coasting"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(leaflet)

# clear the memory
rm(list=ls(all = TRUE))

source("coastal_vis_functions.R")

load_gps_data(file_location = "gps_data/csv_files/")

rides_index <- create_summary()
```

Column {data-width=650}
-----------------------------------------------------------------------

### Map

```{r}
leaflet() %>% 
  addTiles('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png',
    attribution = paste(
      '&copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
      '&copy; <a href="https://cartodb.com/attributions">CartoDB</a>'
    )) %>% 
  add_track(full_dataset)
```

Column {data-width=350}
-----------------------------------------------------------------------

### Contributors

```{r}
gg <- iris %>% ggplot(aes(x = Species)) + geom_bar(stat = "count") + coord_flip()
plotly::ggplotly(gg)
```

### Miles ridden

```{r}
valueBox(rides_index$distance_miles %>% sum() %>% floor(), icon = "fa-bicycle")
```

### Metres climbed

```{r}
valueBox(rides_index$elevation_metres %>% sum() %>% floor(), icon = "fa-caret-up")
```

### Ferries taken

```{r}
valueBox("8", icon = "fa-ship")
```