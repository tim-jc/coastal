---
title: "ph√Øets::coasting"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    theme: 
      version: 4
      navbar-bg: "#0C2340"
    navbar: 
    - { icon: "fa-circle", href: "http://phiets.cc", align: right}
    - { icon: "fa-circle", href: "http://phiets.cc", align: right}
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(leaflet)
library(lubridate)
library(rStrava)

# clear the memory
rm(list=ls(all = TRUE))

source("coastal_vis_functions.R")

load_gps_data(file_location = "gps_data/csv_files/")

rides_index <- create_summary()

image_metadata <- get_image_metadata()
```

Maps
===================================== 

Row
-----------------------------------------------------------------------

### Miles ridden

```{r}
valueBox(rides_index$distance_miles %>% sum() %>% floor(), icon = "fa-bicycle", color = "grey25")
```

### Metres climbed

```{r}
valueBox(rides_index$elevation_metres %>% sum() %>% floor(), icon = "fa-arrow-up", color = "grey25")
```

### Days ridden

```{r}
valueBox(rides_index$start_datetime %>% as.Date() %>% unique() %>% length(), icon = "fa-sun", color = "grey25")
```

### Ferries taken

```{r}
valueBox("8", icon = "fa-ship", color = "grey25")
```

Row 
-----------------------------------------------------------------------

### Overall progress

```{r}
draw_map("all")
```

### Latest ride

```{r}
draw_map("latest")
```

Stats
===================================== 

Row
-----------------------------------------------------------------------

### Most Northerly

```{r}
get_coord_valuebox("N")
```

### Most Southerly

```{r}
get_coord_valuebox("S")
```

### Most Easterly

```{r}
get_coord_valuebox("E")
```

### Most Westerly

```{r}
get_coord_valuebox("W")
```

Row
-----------------------------------------------------------------------

### Contributors

```{r}
draw_xp_plot()
```

### Activity by time of day

```{r}
draw_time_plot()
```